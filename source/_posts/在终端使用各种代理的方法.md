---
title: 在终端使用各种代理的方法
date: 2024-03-11 16:59:48
tags:
---
## 将终端设置为使用代理的环境
```bash
export ALL_PROXY=http://127.0.0.1:7890 # Clash用这个
export ALL_PROXY=socks5h://127.0.0.1:10808 # v2ray用这个
```
## 取消代理
```bash
unset ALL_PROXY
```

## 使用脚本：

```bash
# proxy.sh
# 开启系统代理
function proxy_on() {
        export http_proxy=http://127.0.0.1:7890
        export https_proxy=http://127.0.0.1:7890
        export no_proxy=127.0.0.1,localhost
        export HTTP_PROXY=http://127.0.0.1:7890
        export HTTPS_PROXY=http://127.0.0.1:7890 
        export NO_PROXY=127.0.0.1,localhost
        echo -e "\033[32m[√] 已开启代理\033[0m"
}

# 关闭系统代理
function proxy_off(){
        unset http_proxy
        unset https_proxy
        unset no_proxy
        unset HTTP_PROXY
        unset HTTPS_PROXY
        unset NO_PROXY
        echo -e "\033[31m[×] 已关闭代理\033[0m"
}
```
## apt使用代理
```bash
sudo apt -o Acquire::http::proxy="socks5h://127.0.0.1:10808/" upgrade # 临时版
sudo apt -o Acquire::https::proxy="http://127.0.0.1:7890/" update
```
## pip使用代理
```bash
pip install --proxy=http://127.0.0.1:7890 somepackage # 使用http代理
```
若要使用socks5代理，则需要先安装PySocks模块，可以用whl下载解决 [下载链接](https://files.pythonhosted.org/packages/8d/59/b4572118e098ac8e46e399a1dd0f2d85403ce8bbaad9ec79373ed6badaf9/PySocks-1.7.1-py3-none-any.whl)
```bash
pip install PySocks-1.7.1-py3-none-any.whl
pip install --proxy=socks5h://127.0.0.1:10808 somepackage
```